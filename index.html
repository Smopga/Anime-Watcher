<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Auto Streaming</title>

<style>
body {
    margin: 0;
    font-family: Arial;
    background: #111;
    color: white;
    text-align: center;
}

h1 { margin-top: 20px; }

select {
    padding: 8px;
    margin: 10px;
    font-size: 16px;
}

video {
    width: 80%;
    max-width: 900px;
    margin-top: 20px;
    background: black;
}
</style>
</head>

<body>

<h1>Mein Streaming</h1>

<div>
    <label>Serie:</label>
    <select id="seriesSelect"></select>

    <label>Folge:</label>
    <select id="episodeSelect"></select>
</div>

<video id="video" controls></video>

<script>
const seriesSelect = document.getElementById("seriesSelect");
const episodeSelect = document.getElementById("episodeSelect");
const video = document.getElementById("video");

let mediaData = {};

fetch("media.json")
    .then(response => response.json())
    .then(data => {
        mediaData = data;

        for (let series in mediaData) {
            let option = document.createElement("option");
            option.value = series;
            option.textContent = series;
            seriesSelect.appendChild(option);
        }

        loadEpisodes(seriesSelect.value);
    });

function loadEpisodes(series) {
    episodeSelect.innerHTML = "";

    mediaData[series].forEach(file => {
        let option = document.createElement("option");
        option.value = "media/" + series + "/" + file;
        option.textContent = file.replace(".mp4", "");
        episodeSelect.appendChild(option);
    });

    video.src = episodeSelect.value;
}

seriesSelect.addEventListener("change", () => {
    loadEpisodes(seriesSelect.value);
});

episodeSelect.addEventListener("change", () => {
    video.src = episodeSelect.value;
});
</script>

</body>
</html>
